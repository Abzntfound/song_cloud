<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IBM Lyrical Song Cloud</title>
<link rel="icon" type="image/jpeg" href="favicon.ico">

<!-- GSAP -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; margin:0; text-align:center; color:black;
       background: linear-gradient(90deg, #6d3621, #2c1a12);
       background-size:200% 200%; animation:bgMove 15s ease infinite; padding-top:5rem;}
@keyframes bgMove {0% {background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
h1{font-size:2rem;} p{font-size:large;} input, textarea{width:300px; padding:8px; margin:5px 0;}
textarea{height:100px; width:80%;} ul{list-style:none;padding:0;} li{margin:5px 0;} a{text-decoration:none; color:black;}
hr{border:0;height:2px;background:linear-gradient(to right,transparent 30%,black 50%,transparent 70%);margin:1rem 0;}
footer{background-color:black;color:white;position:fixed;bottom:0;width:100%;padding:5px;}
#header{position:fixed;top:0;left:0;width:100%;background:#6d3621;color:black;display:flex;justify-content:space-between;padding:10px 20px;z-index:1000;}
.gradient-btn{border:2px solid white;background:linear-gradient(to right,#5C2B18 10%,#000 90%);color:white;padding:10px 18px;border-radius:8px;font-weight:bold;cursor:pointer;margin:3px;}
.gradient-btn:hover{background:linear-gradient(to right,#000 10%,#5C2B18 90%); transform:translateY(-2px);}
#loginForm,#registerForm,#developerPortal,#addSongsSection{display:none;margin-top:5rem;}
#Entrance{margin-top:6rem;}
#songList div{margin-bottom:1rem;}
</style>
</head>
<body>

<!-- Header -->
<div id="header" class="animate">
  <h3><a href="#" class="gradient-btn" onclick="showHome()">IBM SONG CLOUD</a></h3>
  <div>
    <button class="gradient-btn" onclick="showLogin()">Log In</button>
    <button class="gradient-btn" onclick="showAddSongs()">Add Songs</button>
  </div>
</div>

<!-- Login Form -->
<div id="loginForm" class="animate">
  <h3>Login</h3>
  <input type="text" id="username" placeholder="Username"><br>
  <input type="password" id="password" placeholder="Password"><br>
  <button class="gradient-btn" onclick="login()">Log In</button><br>
  <a href="#" onclick="showRegister()">Create new account</a>
</div>

<!-- Registration Form -->
<div id="registerForm" class="animate">
  <h3>Create Account</h3>
  <input type="text" id="regUsername" placeholder="Username"><br>
  <input type="password" id="regPassword" placeholder="Password"><br>
  <button class="gradient-btn" onclick="register()">Register</button><br>
  <a href="#" onclick="showLogin()">Back to login</a>
</div>

<!-- Main -->
<div id="Entrance" class="animate">
  <h1>Welcome to IBM's Lyrical Song Cloud!</h1>
  <p>Search for a song:</p>
  <input type="text" id="searchBox" placeholder="Search..." onkeyup="searchSongs()">
  <ul id="results"></ul>
</div>

<!-- Add Songs Section -->
<div id="addSongsSection" class="animate">
  <h3>Add New Song</h3>
  <input type="text" id="songTitle" placeholder="Song Title"><br>
  <textarea id="songLyrics" placeholder="Enter lyrics..."></textarea><br>
  <input type="text" id="songLink" placeholder="Optional URL"><br>
  <button class="gradient-btn" onclick="addSong()">Add Song</button>
  <button class="gradient-btn" onclick="saveSongTemplate()">Save Song</button>
  <h4>Song List</h4>
  <div id="songList"></div>
</div>

<!-- Developer Portal -->
<div id="developerPortal" class="animate">
  <h3>Developer Portal</h3>
  <textarea id="codeEditor"></textarea><br>
  <button class="gradient-btn" onclick="saveCode()">Preview Code</button>
</div>

<footer>Â© IBM Church Rights Reserved</footer>

<script>
// Users
let users = JSON.parse(localStorage.getItem('users')) || [
  {username:"user1", password:"1234", role:"user"},
  {username:"dev", password:"devpass", role:"developer"}
];

// Songs
let songs = JSON.parse(localStorage.getItem('songs')) || [
  {name:"Finally Song", url:"Finally.html", target:"_blank"},
  {name:"Fire", url:"fire.html", target:"_blank"}
];

// Show sections
function hideAll(){['loginForm','registerForm','Entrance','addSongsSection','developerPortal'].forEach(id=>document.getElementById(id).style.display='none');}
function showLogin(){hideAll(); document.getElementById('loginForm').style.display='block';}
function showRegister(){hideAll(); document.getElementById('registerForm').style.display='block';}
function showHome(){hideAll(); document.getElementById('Entrance').style.display='block'; renderSongs();}
function showAddSongs(){hideAll(); document.getElementById('addSongsSection').style.display='block'; renderSongs();}

// Login/Register
function login(){
  const u=document.getElementById('username').value;
  const p=document.getElementById('password').value;
  const user=users.find(x=>x.username===u && x.password===p);
  if(!user){alert('Invalid credentials'); return;}
  hideAll();
  if(user.role==='developer'){document.getElementById('developerPortal').style.display='block'; document.getElementById('addSongsSection').style.display='block'; renderSongs(); document.getElementById('codeEditor').value=document.documentElement.innerHTML;}
  else {alert('Logged in as normal user!'); document.getElementById('Entrance').style.display='block';}
}

function register(){
  const u=document.getElementById('regUsername').value;
  const p=document.getElementById('regPassword').value;
  if(!u||!p){alert('Fill all fields'); return;}
  if(users.find(x=>x.username===u)){alert('Username exists'); return;}
  users.push({username:u,password:p,role:"user"});
  localStorage.setItem('users',JSON.stringify(users));
  alert('Account created!'); showLogin();
}

// Add Song
function addSong(){
  const t=document.getElementById('songTitle').value.trim();
  const l=document.getElementById('songLyrics').value.trim();
  const link=document.getElementById('songLink').value.trim();
  if(!t||!l){alert('Fill title & lyrics'); return;}
  const fileName=t.replace(/\s+/g,'_')+'.html';
  const html=`<html><head><title>${t}</title></head><body><h1>${t}</h1><p>${l}</p>${link?`<a href="${link}" target="_blank">Listen</a>`:''}</body></html>`;
  songs.push({name:t,url:fileName,target:'_blank'});
  localStorage.setItem('songs',JSON.stringify(songs));
  let db=JSON.parse(localStorage.getItem('songFiles')||'{}'); db[fileName]=html; localStorage.setItem('songFiles',JSON.stringify(db));
  renderSongs(); alert(`Song "${t}" added!`);
}

// Render songs
function renderSongs(){
  const list=document.getElementById('songList'); list.innerHTML='';
  if(songs.length===0){list.innerHTML='<p>No songs yet.</p>'; return;}
  songs.forEach(s=>{const d=document.createElement('div'); d.innerHTML=`<h3>${s.name}</h3><a href="${s.url}" target="_blank">Open Song</a><hr>`; list.appendChild(d);});
}

// Save song template
function saveSongTemplate(){
  const t=document.getElementById('songTitle').value.trim();
  if(!t){alert('Add a song first!'); return;}
  let fileName=prompt('File name (without extension):', t.replace(/\s+/g,'_'));
  if(!fileName) return alert('Save cancelled');
  if(!fileName.endsWith('.html')) fileName+='.html';
  const l=document.getElementById('songLyrics').value.trim();
  const link=document.getElementById('songLink').value.trim();
  const html=`<html><head><title>${t}</title></head><body><h1>${t}</h1><p>${l}</p>${link?`<a href="${link}" target="_blank">Listen</a>`:''}</body></html>`;
  let db=JSON.parse(localStorage.getItem('songFiles')||'{}'); db[fileName]=html; localStorage.setItem('songFiles',JSON.stringify(db));
  alert(`Song saved as "${fileName}"!`);
}

// Developer preview
function saveCode(){const code=document.getElementById('codeEditor').value; const w=window.open(); w.document.write(code); w.document.close(); alert('Preview opened!');}

// Search
function searchSongs(){
  const q=document.getElementById('searchBox').value.toLowerCase();
  const res=document.getElementById('results'); res.innerHTML='';
  if(!q) return;
  songs.filter(s=>s.name.toLowerCase().startsWith(q)).forEach(s=>{
    const li=document.createElement('li');
    const a=document.createElement('a'); a.href=s.url; a.textContent=s.name; if(s.target) a.target=s.target;
    li.appendChild(a); res.appendChild(li);
  });
}

// GSAP Animations
gsap.registerPlugin(ScrollTrigger);
gsap.utils.toArray(".animate").forEach(el=>{gsap.from(el,{y:100,opacity:0,duration:1,ease:"power3.out", scrollTrigger:{trigger:el,start:"top 80%",once:true}});});

// Initial render
renderSongs();
</script>
</body>
</html>
